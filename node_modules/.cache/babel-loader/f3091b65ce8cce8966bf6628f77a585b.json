{"ast":null,"code":"import _slicedToArray from \"/Users/amandainnis/ReactProjects/react-site/portfolio/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/amandainnis/ReactProjects/react-site/portfolio/src/components/crb/CRBCard.js\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport IsLoading from \"../reusable/IsLoading\";\nimport * as Common from \"../reusable/common\";\nimport StockData from \"../../data/stock_data\";\nimport ClientData from \"../../data/clientData\";\n\nconst imgCRB = require(\"../../assets/images/crb-img.png\");\n\nconst data = {\n  id: 3,\n  img: imgCRB,\n  title: \"Pricer\",\n  subtitle: \"Stock Pricing and Trade Execution\",\n  blurb: [\"\"],\n  bkgd: \"var(--crb-bkgd)\"\n};\nconst allTickers = StockData.slice();\n\nfunction CRBCard() {\n  const tickerInputRef = React.createRef();\n  const clientInputRef = React.createRef();\n  const quantityInputRef = React.createRef();\n  const ddRef = React.createRef();\n\n  const _useState = useState(0),\n        _useState2 = _slicedToArray(_useState, 2),\n        price = _useState2[0],\n        setPrice = _useState2[1];\n\n  const _useState3 = useState(\"Amazon.com\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        tickerCompany = _useState4[0],\n        setTickerCompany = _useState4[1];\n\n  const _useState5 = useState(),\n        _useState6 = _slicedToArray(_useState5, 2),\n        ticker = _useState6[0],\n        setTicker = _useState6[1];\n\n  const _useState7 = useState(\"AMZN\"),\n        _useState8 = _slicedToArray(_useState7, 2),\n        tickerInput = _useState8[0],\n        setTickerInput = _useState8[1];\n\n  const _useState9 = useState(null),\n        _useState10 = _slicedToArray(_useState9, 2),\n        selectedTicker = _useState10[0],\n        setSelectedTicker = _useState10[1];\n\n  const _useState11 = useState(\"BURGS\"),\n        _useState12 = _slicedToArray(_useState11, 2),\n        clientInput = _useState12[0],\n        setClientInput = _useState12[1];\n\n  const _useState13 = useState(\"Burgess Hill Investment Advisors Inc\"),\n        _useState14 = _slicedToArray(_useState13, 2),\n        clientTitle = _useState14[0],\n        setClientTitle = _useState14[1];\n\n  const _useState15 = useState(\"\"),\n        _useState16 = _slicedToArray(_useState15, 2),\n        quantityInput = _useState16[0],\n        setQuantityInput = _useState16[1];\n\n  const _useState17 = useState(\"\"),\n        _useState18 = _slicedToArray(_useState17, 2),\n        quantityError = _useState18[0],\n        setQuantityError = _useState18[1];\n\n  const _useState19 = useState(\"\"),\n        _useState20 = _slicedToArray(_useState19, 2),\n        tickerError = _useState20[0],\n        setTickerError = _useState20[1];\n\n  const _useState21 = useState(true),\n        _useState22 = _slicedToArray(_useState21, 2),\n        isLoading = _useState22[0],\n        setIsLoading = _useState22[1];\n\n  const _useState23 = useState(false),\n        _useState24 = _slicedToArray(_useState23, 2),\n        tickerDDVisible = _useState24[0],\n        setTickerDDVisible = _useState24[1];\n\n  const _useState25 = useState(StockData),\n        _useState26 = _slicedToArray(_useState25, 2),\n        tickerDDReservoir = _useState26[0],\n        setTickerDDReservoir = _useState26[1];\n\n  const _useState27 = useState(null),\n        _useState28 = _slicedToArray(_useState27, 2),\n        tickerDDFiltered = _useState28[0],\n        setTickerDDFiltered = _useState28[1];\n\n  const getTickerURL = ticker => \"https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=\".concat(ticker, \"&interval=5min&outputsize=full&apikey=NKT90SOYWKFBP04F\");\n\n  function fetchTicker(ticker) {\n    return fetch(getTickerURL(ticker)).then(res => {\n      // console.log(res);\n      if (!res.ok || \"net::ERR_INTERNET_DISCONNECTED\") {\n        throw Error(\"sadface, the res doesnt want to be our friend, but dont feel bad.  btw im middleware\");\n      } // console.log(res);\n\n\n      return res;\n    }).then(res => // this is the promise so don't have a return statement, it will be if and when  its ready\n    // better with es6\n    // console.log(res.json())\n    // setIsLoading(false);\n    res.json()); // .then(res => enzo = res);\n  }\n\n  async function asyncFetch(ticker) {\n    try {\n      let preRes = getTickerURL(ticker);\n      let res = await fetch(preRes);\n      let myData = await res.json();\n      console.log(preRes, res, myData);\n      setIsLoading(true);\n      let myKeys = Object.keys(res[\"Time Series (5min)\"]);\n      console.log(res);\n      setIsLoading(false);\n      setPrice(res[\"Time Series (5min)\"][myKeys[0]][\"1. open\"]);\n    } catch (err) {\n      console.log(err);\n\n      if (err == \"TypeError: Failed to fetch\") {\n        setTickerError(\"Unable to fetch\");\n      } else {\n        setTickerError(\"Not a Ticker\");\n      }\n\n      setIsLoading(false);\n      setTicker(\"\");\n      setPrice(null);\n    }\n  } // async function asyncFetch(ticker) {\n  //   const res = await fetch(getTickerURL(ticker));\n  //   const myData = await res.json();\n  //   setIsLoading(true);\n  //   let myKeys;\n  //   if (res !== undefined && res[\"Time Series (5min)\"] !== undefined) {\n  //     console.log(myData[\"Time Series (5min)\"]);\n  //     console.log(res);\n  //     myKeys = Object.keys(res[\"Time Series (5min)\"]);\n  //     setIsLoading(false);\n  //     setPrice(res[\"Time Series (5min)\"][myKeys[0]][\"1. open\"]);\n  //   } else {\n  //     setIsLoading(false);\n  //     setTicker(\"\");\n  //     setTickerError(\"Not a Ticker\");\n  //     setPrice(null);\n  //   }\n  // }\n\n\n  const resolveFetchedTicker = ticker => {\n    setIsLoading(true);\n    fetchTicker(ticker).then(res => {\n      let myKeys;\n\n      if (res !== undefined && res[\"Time Series (5min)\"] !== undefined) {\n        console.log(res);\n        myKeys = Object.keys(res[\"Time Series (5min)\"]);\n        setIsLoading(false);\n        setPrice(res[\"Time Series (5min)\"][myKeys[0]][\"1. open\"]);\n      } else {\n        setIsLoading(false);\n        setTickerError(\"Not a Ticker\");\n        setTicker(\"\");\n        setPrice(null);\n      }\n    });\n  };\n\n  function handleTickerInput(e) {\n    const tickerDDList = allTickers.slice();\n    let myResults;\n    let moreResults;\n\n    if (e !== null || e !== \"\") {\n      myResults = tickerDDList.filter(myKey => {\n        return myKey.symbol.startsWith(e.target.value.toUpperCase());\n      });\n\n      if (myResults < 1) {\n        myResults = [{\n          symbol: e.target.value,\n          name: \"Not found\"\n        }];\n      } // console.log(myResults[0]);\n\n\n      setTickerInput(e.target.value);\n      setTickerDDFiltered(myResults);\n    }\n  }\n\n  function getPrice() {\n    const myTicker = tickerInput; // setState({ ticker: myTicker });\n\n    console.log(myTicker); // resolveFetchedTicker(myTicker);\n\n    asyncFetch(myTicker);\n  }\n\n  function eraseTicker() {\n    console.log(tickerInputRef);\n    tickerInputRef.current.focus();\n    setTickerInput(\"\");\n    setTickerCompany(\"\");\n    setPrice(\"\");\n    setTickerDDVisible(false);\n    setTickerError(\"\");\n  }\n\n  function eraseClient() {\n    console.log(clientInputRef);\n    clientInputRef.current.focus();\n    setClientInput(\"\");\n    setClientTitle(\"\");\n  }\n\n  function handleKeyUp(e, val) {\n    // console.log(e.which);\n    if (val === \"ticker\") {\n      setTickerDDVisible(true);\n    } else if (val === \"client\") {\n      console.log(\"client\"); // setClientDDVisible(true);\n    } // if (e.which === 40) {\n    //   ddRef.current.children[ddListIndex].focus();\n    // }\n\n  }\n\n  function handleDDClick(val, name) {\n    console.log(val);\n    setTickerInput(val.symbol);\n    setTickerCompany(val.name);\n    setTickerDDVisible(false);\n    getPrice();\n  }\n\n  function handleQtyInput(e) {\n    setQuantityInput(e.target.value);\n  }\n\n  function eraseQtyInput() {\n    setQuantityInput(\"\");\n    quantityInputRef.current.focus();\n  }\n\n  function validate(e, input) {\n    // if key press doesn't match the specified chars, stops user and show error\n    console.log(e.which);\n    console.log(e.key);\n    const eKey = e.key; // const alpha = eKey > 64 && eKey < 91;\n    // const num = eKey >= 48 && eKey <= 57;\n\n    const shift = eKey === 16;\n    const comma = eKey === 188;\n    const backspace = eKey === 8;\n    const alphaNum = /^[0-9a-zA-Z]+$/;\n    const alpha = /[a-zA-Z]+$/;\n    const num = /[0-9]+$/;\n    const space = eKey === 32;\n    const numsSpaceComma = /[0-9, ]+$/;\n\n    if (numsSpaceComma.test(e.target.value)) {\n      console.log(\"accepted\");\n      setQuantityError(\"\");\n    } else {\n      setQuantityError(\"only numbers\");\n    } // if (input === \"ticker\") {\n    // }\n    // if((parseInt(keyCode)>=48 && parseInt(keyCode)<=57) || keyCode==37/*LFT ARROW*/ || keyCode==39/*RGT ARROW*/ || keyCode==8/*BCKSPC*/ || keyCode==46/*DEL*/ || keyCode==9/*TAB*/  || keyCode==45/*minus sign*/ || keyCode==43/*plus sign*/){return true;}\n    // if (/[^a-zA-Z0-9\\-\\/]/.test(e.target.value)) {\n    //   alert(\"Input is not alphanumeric\");\n    //   return false;\n    // }\n    // return true;\n\n  } // function handleArrowEvents(e) {\n  //   console.log(e, e.which);\n  //   if (e.which === 40) {\n  //     // console.log(state, ddRef);\n  //     // ddRef.current.children[0].focus();\n  //     // ddRef.current.children[ddListIndex].focus();\n  //   }\n  //   //       console.log(ddRef);\n  //   //   setState(prevState => {\n  //   //     return { ddListIndex: prevState + 1 };\n  //   //   });\n  // }\n\n\n  function quantityBlur(e) {\n    let priceThis = parseInt(quantityInput.replace(/,/g, \"\"), 10);\n    priceThis = priceThis.toLocaleString(\"en\");\n    setQuantityInput(priceThis);\n  }\n\n  useEffect(() => {\n    // resolveFetchedTicker(\"AMZN\");\n    asyncFetch(\"AMZN\");\n  }, []);\n  let myPrice = Math.round(price * 100) / 100;\n  myPrice = myPrice.toLocaleString(\"en\");\n  myPrice = myPrice !== \"\" ? \"$\" + myPrice : \"\";\n  return React.createElement(\"article\", {\n    className: \"portfolio-card\",\n    style: {\n      backgroundColor: data.bkgd\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257\n    },\n    __self: this\n  }, React.createElement(IsLoading, {\n    isLoading: isLoading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"text-section\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260\n    },\n    __self: this\n  }, data.title), React.createElement(\"h4\", {\n    className: \"subtitle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261\n    },\n    __self: this\n  }, data.subtitle)), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"flex-row mt-3 crb-title-row align-content-end\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"ticker-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265\n    },\n    __self: this\n  }, tickerCompany), React.createElement(\"div\", {\n    className: \"label-style ml-auto\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267\n    },\n    __self: this\n  }, \"Mkt\"), React.createElement(\"div\", {\n    className: \"price-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268\n    },\n    __self: this\n  }, myPrice)), React.createElement(\"div\", {\n    className: \"flex-row crb-top-inputs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271\n    },\n    __self: this\n  }, tickerDDVisible && React.createElement(\"div\", {\n    className: \"invisible-background\",\n    onClick: () => {\n      setTickerDDVisible(false);\n      console.log(\"background click\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"input-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"relative\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"clearable\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    ref: tickerInputRef,\n    required: true,\n    className: \"input-style crb-input\",\n    type: \"text\",\n    placeholder: \"ticker\",\n    name: \"tickerInput\",\n    autoComplete: \"off\",\n    value: tickerInput,\n    onChange: e => {\n      handleTickerInput(e);\n    },\n    onKeyUp: e => {\n      handleKeyUp(e, \"ticker\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284\n    },\n    __self: this\n  }), tickerInput !== \"\" ? React.createElement(\"span\", {\n    className: \"clearable-clear aicon-close\",\n    onClick: () => {\n      eraseTicker();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302\n    },\n    __self: this\n  }) : null, tickerDDVisible && React.createElement(\"div\", {\n    className: \"dropdown-container crb\",\n    ref: ddRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310\n    },\n    __self: this\n  }, tickerDDFiltered !== \"\" && tickerDDFiltered.map((val, i) => {\n    return React.createElement(React.Fragment, null, React.createElement(\"button\", {\n      key: val.symbol,\n      onClick: e => {\n        handleDDClick(val, \"tickerInput\");\n      },\n      value: selectedTicker,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }, val.symbol, \" - \", val.name));\n  })))), React.createElement(\"div\", {\n    className: \"error-message red-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331\n    },\n    __self: this\n  }, tickerError)), React.createElement(\"div\", {\n    className: \"input-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"relative\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"clearable\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    id: \"qtyForTicker\",\n    type: \"text\",\n    ref: quantityInputRef,\n    className: \"input-style crb-input\",\n    placeholder: \"quantity\",\n    value: quantityInput,\n    onChange: e => handleQtyInput(e),\n    onKeyUp: e => validate(e, \"quantity\"),\n    onBlur: e => {\n      quantityBlur(e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336\n    },\n    __self: this\n  }), quantityInput !== \"\" && React.createElement(\"span\", {\n    className: \"clearable-clear aicon-close\",\n    onClick: () => eraseQtyInput(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"error-message red-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357\n    },\n    __self: this\n  }, quantityError)), React.createElement(\"div\", {\n    className: \"button-row flex-row justify-content-end\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    // onClick={() => {\n    //   getPrice();\n    // }}\n    className: \"var(--crb-button-type) large green mr-2 crb-button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360\n    },\n    __self: this\n  }, \"Buy\"), React.createElement(\"button\", {\n    // onClick={() => {\n    //   getPrice();\n    // }}\n    className: \"var(--crb-button-type) large red crb-button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368\n    },\n    __self: this\n  }, \"Sell\")))));\n}\n\nexport default CRBCard;","map":{"version":3,"sources":["/Users/amandainnis/ReactProjects/react-site/portfolio/src/components/crb/CRBCard.js"],"names":["React","useState","useRef","useEffect","IsLoading","Common","StockData","ClientData","imgCRB","require","data","id","img","title","subtitle","blurb","bkgd","allTickers","slice","CRBCard","tickerInputRef","createRef","clientInputRef","quantityInputRef","ddRef","price","setPrice","tickerCompany","setTickerCompany","ticker","setTicker","tickerInput","setTickerInput","selectedTicker","setSelectedTicker","clientInput","setClientInput","clientTitle","setClientTitle","quantityInput","setQuantityInput","quantityError","setQuantityError","tickerError","setTickerError","isLoading","setIsLoading","tickerDDVisible","setTickerDDVisible","tickerDDReservoir","setTickerDDReservoir","tickerDDFiltered","setTickerDDFiltered","getTickerURL","fetchTicker","fetch","then","res","ok","Error","json","asyncFetch","preRes","myData","console","log","myKeys","Object","keys","err","resolveFetchedTicker","undefined","handleTickerInput","e","tickerDDList","myResults","moreResults","filter","myKey","symbol","startsWith","target","value","toUpperCase","name","getPrice","myTicker","eraseTicker","current","focus","eraseClient","handleKeyUp","val","handleDDClick","handleQtyInput","eraseQtyInput","validate","input","which","key","eKey","shift","comma","backspace","alphaNum","alpha","num","space","numsSpaceComma","test","quantityBlur","priceThis","parseInt","replace","toLocaleString","myPrice","Math","round","backgroundColor","map","i"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport IsLoading from \"../reusable/IsLoading\";\nimport * as Common from \"../reusable/common\";\nimport StockData from \"../../data/stock_data\";\nimport ClientData from \"../../data/clientData\";\n\nconst imgCRB = require(\"../../assets/images/crb-img.png\");\nconst data = {\n  id: 3,\n  img: imgCRB,\n  title: \"Pricer\",\n  subtitle: \"Stock Pricing and Trade Execution\",\n  blurb: [\"\"],\n  bkgd: \"var(--crb-bkgd)\"\n};\n\nconst allTickers = StockData.slice();\nfunction CRBCard() {\n  const tickerInputRef = React.createRef();\n  const clientInputRef = React.createRef();\n  const quantityInputRef = React.createRef();\n\n  const ddRef = React.createRef();\n  const [price, setPrice] = useState(0);\n  const [tickerCompany, setTickerCompany] = useState(\"Amazon.com\");\n  const [ticker, setTicker] = useState();\n\n  const [tickerInput, setTickerInput] = useState(\"AMZN\");\n  const [selectedTicker, setSelectedTicker] = useState(null);\n\n  const [clientInput, setClientInput] = useState(\"BURGS\");\n  const [clientTitle, setClientTitle] = useState(\n    \"Burgess Hill Investment Advisors Inc\"\n  );\n  const [quantityInput, setQuantityInput] = useState(\"\");\n  const [quantityError, setQuantityError] = useState(\"\");\n  const [tickerError, setTickerError] = useState(\"\");\n\n  const [isLoading, setIsLoading] = useState(true);\n  const [tickerDDVisible, setTickerDDVisible] = useState(false);\n  const [tickerDDReservoir, setTickerDDReservoir] = useState(StockData);\n  const [tickerDDFiltered, setTickerDDFiltered] = useState(null);\n\n  const getTickerURL = ticker =>\n    `https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=${ticker}&interval=5min&outputsize=full&apikey=NKT90SOYWKFBP04F`;\n\n  function fetchTicker(ticker) {\n    return fetch(getTickerURL(ticker))\n      .then(res => {\n        // console.log(res);\n        if (!res.ok || \"net::ERR_INTERNET_DISCONNECTED\") {\n          throw Error(\n            \"sadface, the res doesnt want to be our friend, but dont feel bad.  btw im middleware\"\n          );\n        }\n        // console.log(res);\n        return res;\n      })\n      .then(res =>\n        // this is the promise so don't have a return statement, it will be if and when  its ready\n        // better with es6\n        // console.log(res.json())\n        // setIsLoading(false);\n        res.json()\n      );\n    // .then(res => enzo = res);\n  }\n  async function asyncFetch(ticker) {\n    try {\n      let preRes = getTickerURL(ticker);\n      let res = await fetch(preRes);\n      let myData = await res.json();\n      console.log(preRes, res, myData);\n      setIsLoading(true);\n      let myKeys = Object.keys(res[\"Time Series (5min)\"]);\n      console.log(res);\n      setIsLoading(false);\n      setPrice(res[\"Time Series (5min)\"][myKeys[0]][\"1. open\"]);\n    } catch (err) {\n      console.log(err);\n      if (err == \"TypeError: Failed to fetch\") {\n        setTickerError(\"Unable to fetch\");\n      } else {\n        setTickerError(\"Not a Ticker\");\n      }\n      setIsLoading(false);\n      setTicker(\"\");\n      setPrice(null);\n    }\n  }\n  // async function asyncFetch(ticker) {\n  //   const res = await fetch(getTickerURL(ticker));\n  //   const myData = await res.json();\n  //   setIsLoading(true);\n  //   let myKeys;\n  //   if (res !== undefined && res[\"Time Series (5min)\"] !== undefined) {\n  //     console.log(myData[\"Time Series (5min)\"]);\n  //     console.log(res);\n  //     myKeys = Object.keys(res[\"Time Series (5min)\"]);\n  //     setIsLoading(false);\n  //     setPrice(res[\"Time Series (5min)\"][myKeys[0]][\"1. open\"]);\n  //   } else {\n  //     setIsLoading(false);\n  //     setTicker(\"\");\n  //     setTickerError(\"Not a Ticker\");\n  //     setPrice(null);\n  //   }\n  // }\n  const resolveFetchedTicker = ticker => {\n    setIsLoading(true);\n    fetchTicker(ticker).then(res => {\n      let myKeys;\n\n      if (res !== undefined && res[\"Time Series (5min)\"] !== undefined) {\n        console.log(res);\n        myKeys = Object.keys(res[\"Time Series (5min)\"]);\n        setIsLoading(false);\n        setPrice(res[\"Time Series (5min)\"][myKeys[0]][\"1. open\"]);\n      } else {\n        setIsLoading(false);\n        setTickerError(\"Not a Ticker\");\n        setTicker(\"\");\n        setPrice(null);\n      }\n    });\n  };\n\n  function handleTickerInput(e) {\n    const tickerDDList = allTickers.slice();\n    let myResults;\n    let moreResults;\n    if (e !== null || e !== \"\") {\n      myResults = tickerDDList.filter(myKey => {\n        return myKey.symbol.startsWith(e.target.value.toUpperCase());\n      });\n      if (myResults < 1) {\n        myResults = [{ symbol: e.target.value, name: \"Not found\" }];\n      }\n      // console.log(myResults[0]);\n      setTickerInput(e.target.value);\n      setTickerDDFiltered(myResults);\n    }\n  }\n  function getPrice() {\n    const myTicker = tickerInput;\n    // setState({ ticker: myTicker });\n    console.log(myTicker);\n    // resolveFetchedTicker(myTicker);\n    asyncFetch(myTicker);\n  }\n  function eraseTicker() {\n    console.log(tickerInputRef);\n    tickerInputRef.current.focus();\n    setTickerInput(\"\");\n    setTickerCompany(\"\");\n    setPrice(\"\");\n    setTickerDDVisible(false);\n    setTickerError(\"\");\n  }\n  function eraseClient() {\n    console.log(clientInputRef);\n    clientInputRef.current.focus();\n    setClientInput(\"\");\n    setClientTitle(\"\");\n  }\n  function handleKeyUp(e, val) {\n    // console.log(e.which);\n    if (val === \"ticker\") {\n      setTickerDDVisible(true);\n    } else if (val === \"client\") {\n      console.log(\"client\");\n      // setClientDDVisible(true);\n    }\n\n    // if (e.which === 40) {\n    //   ddRef.current.children[ddListIndex].focus();\n    // }\n  }\n  function handleDDClick(val, name) {\n    console.log(val);\n    setTickerInput(val.symbol);\n    setTickerCompany(val.name);\n    setTickerDDVisible(false);\n    getPrice();\n  }\n  function handleQtyInput(e) {\n    setQuantityInput(e.target.value);\n  }\n\n  function eraseQtyInput() {\n    setQuantityInput(\"\");\n    quantityInputRef.current.focus();\n  }\n\n  function validate(e, input) {\n    // if key press doesn't match the specified chars, stops user and show error\n    console.log(e.which);\n    console.log(e.key);\n    const eKey = e.key;\n    // const alpha = eKey > 64 && eKey < 91;\n\n    // const num = eKey >= 48 && eKey <= 57;\n    const shift = eKey === 16;\n    const comma = eKey === 188;\n    const backspace = eKey === 8;\n    const alphaNum = /^[0-9a-zA-Z]+$/;\n    const alpha = /[a-zA-Z]+$/;\n    const num = /[0-9]+$/;\n    const space = eKey === 32;\n    const numsSpaceComma = /[0-9, ]+$/;\n\n    if (numsSpaceComma.test(e.target.value)) {\n      console.log(\"accepted\");\n      setQuantityError(\"\");\n    } else {\n      setQuantityError(\"only numbers\");\n    }\n\n    // if (input === \"ticker\") {\n    // }\n    // if((parseInt(keyCode)>=48 && parseInt(keyCode)<=57) || keyCode==37/*LFT ARROW*/ || keyCode==39/*RGT ARROW*/ || keyCode==8/*BCKSPC*/ || keyCode==46/*DEL*/ || keyCode==9/*TAB*/  || keyCode==45/*minus sign*/ || keyCode==43/*plus sign*/){return true;}\n    // if (/[^a-zA-Z0-9\\-\\/]/.test(e.target.value)) {\n    //   alert(\"Input is not alphanumeric\");\n    //   return false;\n    // }\n\n    // return true;\n  }\n  // function handleArrowEvents(e) {\n  //   console.log(e, e.which);\n\n  //   if (e.which === 40) {\n  //     // console.log(state, ddRef);\n  //     // ddRef.current.children[0].focus();\n  //     // ddRef.current.children[ddListIndex].focus();\n  //   }\n  //   //       console.log(ddRef);\n  //   //   setState(prevState => {\n  //   //     return { ddListIndex: prevState + 1 };\n  //   //   });\n  // }\n  function quantityBlur(e) {\n    let priceThis = parseInt(quantityInput.replace(/,/g, \"\"), 10);\n    priceThis = priceThis.toLocaleString(\"en\");\n    setQuantityInput(priceThis);\n  }\n  useEffect(() => {\n    // resolveFetchedTicker(\"AMZN\");\n    asyncFetch(\"AMZN\");\n  }, []);\n\n  let myPrice = Math.round(price * 100) / 100;\n  myPrice = myPrice.toLocaleString(\"en\");\n  myPrice = myPrice !== \"\" ? \"$\" + myPrice : \"\";\n\n  return (\n    <article className=\"portfolio-card\" style={{ backgroundColor: data.bkgd }}>\n      <IsLoading isLoading={isLoading}></IsLoading>\n      <div className=\"text-section\">\n        <h1 className=\"title\">{data.title}</h1>\n        <h4 className=\"subtitle\">{data.subtitle}</h4>\n      </div>\n      <div>\n        <div className=\"flex-row mt-3 crb-title-row align-content-end\">\n          <div className=\"ticker-title\">{tickerCompany}</div>\n\n          <div className=\"label-style ml-auto\">Mkt</div>\n          <div className=\"price-title\">{myPrice}</div>\n        </div>\n\n        <div className=\"flex-row crb-top-inputs\">\n          {tickerDDVisible && (\n            <div\n              className=\"invisible-background\"\n              onClick={() => {\n                setTickerDDVisible(false);\n                console.log(\"background click\");\n              }}\n            ></div>\n          )}\n          <div className=\"input-group\">\n            <div className=\"relative\">\n              <div className=\"clearable\">\n                <input\n                  ref={tickerInputRef}\n                  required\n                  className=\"input-style crb-input\"\n                  type=\"text\"\n                  placeholder=\"ticker\"\n                  name=\"tickerInput\"\n                  autoComplete=\"off\"\n                  value={tickerInput}\n                  onChange={e => {\n                    handleTickerInput(e);\n                  }}\n                  onKeyUp={e => {\n                    handleKeyUp(e, \"ticker\");\n                  }}\n                />\n\n                {tickerInput !== \"\" ? (\n                  <span\n                    className=\"clearable-clear aicon-close\"\n                    onClick={() => {\n                      eraseTicker();\n                    }}\n                  ></span>\n                ) : null}\n                {tickerDDVisible && (\n                  <div className=\"dropdown-container crb\" ref={ddRef}>\n                    {tickerDDFiltered !== \"\" &&\n                      tickerDDFiltered.map((val, i) => {\n                        return (\n                          <>\n                            <button\n                              key={val.symbol}\n                              onClick={e => {\n                                handleDDClick(val, \"tickerInput\");\n                              }}\n                              value={selectedTicker}\n                            >\n                              {val.symbol} - {val.name}\n                            </button>\n                          </>\n                        );\n                      })}\n                  </div>\n                )}\n              </div>\n            </div>\n            <div className=\"error-message red-text\">{tickerError}</div>\n          </div>\n          <div className=\"input-group\">\n            <div className=\"relative\">\n              <div className=\"clearable\">\n                <input\n                  id=\"qtyForTicker\"\n                  type=\"text\"\n                  ref={quantityInputRef}\n                  className=\"input-style crb-input\"\n                  placeholder=\"quantity\"\n                  value={quantityInput}\n                  onChange={e => handleQtyInput(e)}\n                  onKeyUp={e => validate(e, \"quantity\")}\n                  onBlur={e => {\n                    quantityBlur(e);\n                  }}\n                />\n                {quantityInput !== \"\" && (\n                  <span\n                    className=\"clearable-clear aicon-close\"\n                    onClick={() => eraseQtyInput()}\n                  ></span>\n                )}\n              </div>\n            </div>\n            <div className=\"error-message red-text\">{quantityError}</div>\n          </div>\n          <div className=\"button-row flex-row justify-content-end\">\n            <button\n              // onClick={() => {\n              //   getPrice();\n              // }}\n              className=\"var(--crb-button-type) large green mr-2 crb-button\"\n            >\n              Buy\n            </button>\n            <button\n              // onClick={() => {\n              //   getPrice();\n              // }}\n              className=\"var(--crb-button-type) large red crb-button\"\n            >\n              Sell\n            </button>\n          </div>\n        </div>\n      </div>\n    </article>\n  );\n}\n\nexport default CRBCard;\n"]},"metadata":{},"sourceType":"module"}