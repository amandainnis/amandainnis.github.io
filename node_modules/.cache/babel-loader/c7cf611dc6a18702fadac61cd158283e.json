{"ast":null,"code":"import _slicedToArray from \"/Users/amandainnis/ReactProjects/react-site/portfolio/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/amandainnis/ReactProjects/react-site/portfolio/src/components/reusable/LineChartSinglePrice.js\";\nimport React, { createRef, useState, useRef, useEffect } from \"react\";\nimport * as d3 from \"d3\";\nimport * as DataHandler from \"../../data/DataHandler\";\nimport * as moment from \"../../../node_modules/moment/moment\";\nexport default function LineChartSinglePrice() {\n  const chart = createRef();\n  const startValTicker = useRef();\n  const startValBenchmark = useRef();\n  const defaultHeight = 220;\n  var containerElement;\n  let YOYdiff;\n\n  const _useState = useState(DataHandler.alphaCaptureChartData),\n        _useState2 = _slicedToArray(_useState, 2),\n        chartData = _useState2[0],\n        setChartData = _useState2[1];\n\n  function numberFormatFn(d) {\n    return \"$\" + d;\n  }\n\n  function getLineDiffValue(lineOne, lineTwo) {\n    return lineOne == null || lineTwo == null ? null : lineOne - lineTwo;\n  }\n\n  function getYOYdiffColor(YOY) {\n    if (YOY < 0) {\n      return \"YOYred\";\n    } else {\n      return \"YOYgreen\";\n    }\n  }\n\n  function prepMaxValAlt(myData, myArray) {\n    let tempArr = [];\n    console.log(myArray);\n\n    for (let i = 0; i < myData.length; i++) {// tempArr.push(myData[i][yLineOne], myData[i][yLineTwo]);\n      // if (myData[i][yLineOne] !== null) tempArr.push(myData[i][yLineOne]);\n      // if (myData[i][yLineTwo] !== null) tempArr.push(myData[i][yLineTwo]);\n    }\n\n    return tempArr;\n  }\n\n  prepMaxValAlt(chartData, [yLineOne, yLineTwo]); // let tempArrAlt = prepMaxValAlt(chartData, [yLineOne, yLineTwo]);\n  // console.log(tempArrAlt);\n\n  function prepMaxVal(myData, yLineOne, yLineTwo) {\n    let tempArr = [];\n\n    for (let i = 0; i < myData.length; i++) {\n      tempArr.push(myData[i][yLineOne], myData[i][yLineTwo]);\n      if (myData[i][yLineOne] !== null) tempArr.push(myData[i][yLineOne]);\n      if (myData[i][yLineTwo] !== null) tempArr.push(myData[i][yLineTwo]);\n    }\n\n    return tempArr;\n  }\n\n  function getMaxVal(myData, yLineOne, yLineTwo) {\n    let tempArr = prepMaxVal(myData, yLineOne, yLineTwo);\n    let tempArrB = prepMaxVal(myData, yLineOne, yLineTwo);\n    let tempMax = tempArr.reduce((a, b) => Math.max(a, b));\n    let tempMin = tempArrB.reduce((a, b) => Math.min(a, b));\n    console.log(tempMax, tempMin, tempArr);\n    return {\n      min: tempMin,\n      max: tempMax\n    };\n  }\n\n  function createChart(chartData, yLineOne, yLineTwo) {\n    containerElement = chart.current;\n    containerElement.innerHTML = \"\";\n    console.log(chartData);\n    let tempMinMax = getMaxVal(chartData, yLineOne, yLineTwo);\n    let minVal = tempMinMax.min;\n    let maxVal = tempMinMax.max; // let currentMonth = getCurrentMonth();\n\n    let margin = {\n      top: 20,\n      right: 60,\n      bottom: 0,\n      left: 10\n    }; //////////////////////// Establish the reused vals and the bound functions  ////////////////////////\n\n    let width = Number.isNaN(parseInt(d3.select(containerElement).style(\"width\"))) ? 0 : parseInt(d3.select(containerElement).style(\"width\")) - margin.left - margin.right;\n    let height = 220 - margin.top;\n    let justBisect = d3.bisector(d => chartData.indexOf(d)).left; //////////////////////// Set the scales  ////////////////////////\n\n    let x = d3.scaleLinear().range([0, width]);\n    let y = d3.scaleLinear().range([height, 0]); //////////////////////// Set the axis ////////////////////////\n\n    let xAxis = d3.axisBottom(x) // .ticks(12)\n    .tickFormat(function (d) {\n      return chartData[d].niceDateAbbrev;\n    }).tickPadding(6);\n    let yAxis = d3.axisRight(y).tickFormat(d => {\n      return numberFormatFn(d);\n    }).ticks(6).tickPadding(6); //////////////////////// Define the lines and/or areas  ////////////////////////\n\n    const lineOne = d3.line().defined(function (d) {\n      if (d[yLineOne] !== null) {\n        return d[yLineOne];\n      }\n    }).x((d, i) => {\n      console.log(i, d);\n      return x(i);\n    }).y(d => y(d[yLineOne]));\n    const lineTwo = d3.line().defined(function (d) {\n      if (d[yLineTwo] !== null) {\n        return d[yLineTwo];\n      }\n    }).x((d, i) => {\n      console.log(i, d);\n      return x(i);\n    }).y(d => y(d[yLineTwo])); // //////////////////////// Define parent SVG  ////////////////////////\n\n    const CVsvg = d3.select(containerElement).append(\"svg\").attr(\"width\", \"100%\").attr(\"height\", height + margin.top + margin.bottom + 40).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\"); // //////////////////////// Loop through / sort data  ////////////////////////\n\n    chartData.forEach(d => {\n      d = +d;\n    }); // //////////////////////// Set the domains  ////////////////////////\n\n    x.domain([parseInt(d3.min(chartData, (d, i) => i)), parseInt(d3.max(chartData, (d, i) => i))]); // y.domain([minVal, maxVal]);\n\n    y.domain([0, maxVal]); // //////////////////////// Append the lines / areas  ////////////////////////\n\n    CVsvg.append(\"path\").datum(chartData).attr(\"class\", \"lineOne line\").attr(\"d\", lineOne).transition().duration(500);\n    CVsvg.append(\"path\").datum(chartData).attr(\"class\", \"lineTwo line\").attr(\"d\", lineTwo).transition().duration(500); // ///////////////////////  Add the X & Y Axis  ////////////////////////\n\n    CVsvg.append(\"g\").attr(\"class\", \"yAxis\").attr(\"transform\", \"translate(\" + (width + 6) + \",0)\").call(yAxis);\n    CVsvg.append(\"g\").attr(\"class\", \"xAxis\").attr(\"transform\", \"translate(0,\" + height + \")\").call(xAxis); // //////////////////////// Add Line Tracing on mouse and markers   ////////////////////////\n\n    const lineTrace = CVsvg.append(\"line\").attr(\"class\", \"mouse-line x\").style(\"opacity\", 0.5).attr(\"y1\", 0).attr(\"y2\", height);\n    const marker = CVsvg.append(\"g\").attr(\"class\", \"marker\");\n    marker.append(\"circle\").attr(\"class\", \"line-marker lineOne\").transition().duration(500).attr(\"r\", 5);\n    const marker2 = CVsvg.append(\"g\").attr(\"class\", \"marker\");\n    marker2.append(\"circle\").attr(\"class\", \"line-marker lineTwo\").transition().duration(500).attr(\"r\", 5); // //////////////////////// Tooltip  ////////////////////////\n\n    const tooltipDiv = d3.select(containerElement).append(\"div\").attr(\"class\", \"tooltipDiv\");\n    const dateContainer = tooltipDiv.append(\"div\").attr(\"class\", \"text-container\");\n    dateContainer.append(\"div\").attr(\"class\", \"label-style mr-1\").text(\"Date\");\n    const dateText = dateContainer.append(\"div\").attr(\"class\", \"value-text\");\n    const lineOneTextContainer = tooltipDiv.append(\"div\").attr(\"class\", \"text-container\");\n    lineOneTextContainer.append(\"div\").attr(\"class\", \"label-style mr-1\").text(\"2018\");\n    lineOneTextContainer.append(\"div\").attr(\"class\", \"dot lineOne\");\n    const lineOneText = lineOneTextContainer.append(\"div\").attr(\"class\", \"value-text\");\n    const lineTwoTextContainer = tooltipDiv.append(\"div\").attr(\"class\", \"text-container\");\n    lineTwoTextContainer.append(\"div\").attr(\"class\", \"label-style mr-1\").text(\"2019\");\n    lineTwoTextContainer.append(\"div\").attr(\"class\", \"dot lineTwo\");\n    const lineTwoText = lineTwoTextContainer.append(\"div\").attr(\"class\", \"value-text\");\n    const YOYContainer = tooltipDiv.append(\"div\").attr(\"class\", \"text-container\");\n    YOYContainer.append(\"div\").attr(\"class\", \"label-style mr-1\").text(\"YOY\");\n    const YOYText = YOYContainer.append(\"div\"); //////////////////////// Add Rect to Capture Mouse Movements  ////////////////////////\n\n    CVsvg.append(\"rect\").on(\"mouseover\", () => {\n      lineTrace.style(\"display\", null);\n      d3.select(\".mouse-line\").style(\"opacity\", \"1\");\n      d3.selectAll(\".mouse-per-line .line-marker\").style(\"opacity\", \"1\");\n    }).on(\"mousemove\", () => {\n      let xy = d3.mouse(d3.event.currentTarget);\n      let x0 = x.invert(xy[0]);\n      let mouseIndex = justBisect(chartData, x0, 1);\n      let d0 = chartData[mouseIndex - 1];\n      let d1 = chartData[mouseIndex];\n      let d;\n\n      if (d1 !== undefined) {\n        d = x0 - chartData.indexOf(d0) > chartData.indexOf(d1) - x0 ? d1 : d0;\n      } else {\n        d = d0;\n      }\n\n      lineTrace.attr(\"transform\", \"translate(\" + x(chartData.indexOf(d)) + \",0)\");\n      marker.attr(\"transform\", \"translate(\" + x(chartData.indexOf(d)) + \",\" + y(d[yLineOne]) + \")\");\n      marker2.attr(\"transform\", \"translate(\" + x(chartData.indexOf(d)) + \",\" + y(d[yLineTwo]) + \")\");\n      let l1text = d[yLineOne] !== null ? numberFormatFn(d[yLineOne]) : \"\";\n      let l2text = d[yLineTwo] !== null ? numberFormatFn(d[yLineTwo]) : \"\"; // // YOYdiff = YOYdiff !== null ? numberFormatFn(YOYdiff) : \"\";\n\n      lineOneText.text(l1text);\n      lineTwoText.text(l2text);\n      dateText.text(d.niceDate + \" \" + d.niceTime); // // YOYText.text(YOYdiff);\n      // // YOYText.attr(\"class\", YOYdiffColor);\n\n      d3.select(\".mouse-line.x\").attr(\"y2\", height);\n    }).attr(\"class\", \"totalRect\").attr(\"fill\", \"none\").attr(\"x\", 0).attr(\"pointer-events\", \"all\").attr(\"width\", width).attr(\"transform\", \"translate(0,0)\").attr(\"height\", height).transition().duration(500); //////////////////////// Set the data on load ////////////////////////\n\n    d3.set().add(chartData[chartData.length - 1]);\n    let d = chartData[chartData.length - 1];\n    lineTrace.attr(\"transform\", \"translate(\" + x(chartData.indexOf(d)) + \",0)\");\n    marker.attr(\"transform\", \"translate(\" + x(chartData.indexOf(d)) + \",\" + y(d[yLineOne]) + \")\");\n    marker2.attr(\"transform\", \"translate(\" + x(chartData.indexOf(d)) + \",\" + y(d[yLineTwo]) + \")\");\n    let l1text = d[yLineOne] !== null ? numberFormatFn(d[yLineOne]) : \"\";\n    let l2text = d[yLineTwo] !== null ? numberFormatFn(d[yLineTwo]) : \"\"; // // YOYdiff = YOYdiff !== null ? numberFormatFn(YOYdiff) : \"\";\n\n    lineOneText.text(l1text);\n    lineTwoText.text(l2text);\n    dateText.text(d.niceDate + \" \" + d.niceTime); // // YOYText.text(YOYdiff);\n    // // YOYText.attr(\"class\", YOYdiffColor);\n\n    d3.select(\".mouse-line.x\").attr(\"y2\", height);\n  }\n\n  useEffect(() => {\n    createChart(chartData, \"price\", \"benchmark\");\n  }, []);\n  return React.createElement(\"div\", {\n    ref: chart,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343\n    },\n    __self: this\n  });\n}","map":{"version":3,"sources":["/Users/amandainnis/ReactProjects/react-site/portfolio/src/components/reusable/LineChartSinglePrice.js"],"names":["React","createRef","useState","useRef","useEffect","d3","DataHandler","moment","LineChartSinglePrice","chart","startValTicker","startValBenchmark","defaultHeight","containerElement","YOYdiff","alphaCaptureChartData","chartData","setChartData","numberFormatFn","d","getLineDiffValue","lineOne","lineTwo","getYOYdiffColor","YOY","prepMaxValAlt","myData","myArray","tempArr","console","log","i","length","yLineOne","yLineTwo","prepMaxVal","push","getMaxVal","tempArrB","tempMax","reduce","a","b","Math","max","tempMin","min","createChart","current","innerHTML","tempMinMax","minVal","maxVal","margin","top","right","bottom","left","width","Number","isNaN","parseInt","select","style","height","justBisect","bisector","indexOf","x","scaleLinear","range","y","xAxis","axisBottom","tickFormat","niceDateAbbrev","tickPadding","yAxis","axisRight","ticks","line","defined","CVsvg","append","attr","forEach","domain","datum","transition","duration","call","lineTrace","marker","marker2","tooltipDiv","dateContainer","text","dateText","lineOneTextContainer","lineOneText","lineTwoTextContainer","lineTwoText","YOYContainer","YOYText","on","selectAll","xy","mouse","event","currentTarget","x0","invert","mouseIndex","d0","d1","undefined","l1text","l2text","niceDate","niceTime","set","add"],"mappings":"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","sourcesContent":["import React, { createRef, useState, useRef, useEffect } from \"react\";\nimport * as d3 from \"d3\";\nimport * as DataHandler from \"../../data/DataHandler\";\nimport * as moment from \"../../../node_modules/moment/moment\";\n\nexport default function LineChartSinglePrice() {\n  const chart = createRef();\n  const startValTicker = useRef();\n  const startValBenchmark = useRef();\n  const defaultHeight = 220;\n  var containerElement;\n  let YOYdiff;\n  const [chartData, setChartData] = useState(DataHandler.alphaCaptureChartData);\n\n  function numberFormatFn(d) {\n    return \"$\" + d;\n  }\n\n  function getLineDiffValue(lineOne, lineTwo) {\n    return lineOne == null || lineTwo == null ? null : lineOne - lineTwo;\n  }\n  function getYOYdiffColor(YOY) {\n    if (YOY < 0) {\n      return \"YOYred\";\n    } else {\n      return \"YOYgreen\";\n    }\n  }\n  function prepMaxValAlt(myData, myArray) {\n    let tempArr = [];\n    console.log(myArray);\n    for (let i = 0; i < myData.length; i++) {\n      // tempArr.push(myData[i][yLineOne], myData[i][yLineTwo]);\n      // if (myData[i][yLineOne] !== null) tempArr.push(myData[i][yLineOne]);\n      // if (myData[i][yLineTwo] !== null) tempArr.push(myData[i][yLineTwo]);\n    }\n    return tempArr;\n  }\n  prepMaxValAlt(chartData, [yLineOne, yLineTwo]);\n  // let tempArrAlt = prepMaxValAlt(chartData, [yLineOne, yLineTwo]);\n  // console.log(tempArrAlt);\n\n  function prepMaxVal(myData, yLineOne, yLineTwo) {\n    let tempArr = [];\n    for (let i = 0; i < myData.length; i++) {\n      tempArr.push(myData[i][yLineOne], myData[i][yLineTwo]);\n      if (myData[i][yLineOne] !== null) tempArr.push(myData[i][yLineOne]);\n      if (myData[i][yLineTwo] !== null) tempArr.push(myData[i][yLineTwo]);\n    }\n    return tempArr;\n  }\n  function getMaxVal(myData, yLineOne, yLineTwo) {\n    let tempArr = prepMaxVal(myData, yLineOne, yLineTwo);\n    let tempArrB = prepMaxVal(myData, yLineOne, yLineTwo);\n\n    let tempMax = tempArr.reduce((a, b) => Math.max(a, b));\n    let tempMin = tempArrB.reduce((a, b) => Math.min(a, b));\n    console.log(tempMax, tempMin, tempArr);\n    return { min: tempMin, max: tempMax };\n  }\n  function createChart(chartData, yLineOne, yLineTwo) {\n    containerElement = chart.current;\n    containerElement.innerHTML = \"\";\n    console.log(chartData);\n    let tempMinMax = getMaxVal(chartData, yLineOne, yLineTwo);\n    let minVal = tempMinMax.min;\n    let maxVal = tempMinMax.max;\n    // let currentMonth = getCurrentMonth();\n    let margin = { top: 20, right: 60, bottom: 0, left: 10 };\n    //////////////////////// Establish the reused vals and the bound functions  ////////////////////////\n    let width = Number.isNaN(\n      parseInt(d3.select(containerElement).style(\"width\"))\n    )\n      ? 0\n      : parseInt(d3.select(containerElement).style(\"width\")) -\n        margin.left -\n        margin.right;\n    let height = 220 - margin.top;\n    let justBisect = d3.bisector(d => chartData.indexOf(d)).left;\n\n    //////////////////////// Set the scales  ////////////////////////\n\n    let x = d3.scaleLinear().range([0, width]);\n\n    let y = d3.scaleLinear().range([height, 0]);\n\n    //////////////////////// Set the axis ////////////////////////\n\n    let xAxis = d3\n      .axisBottom(x)\n      // .ticks(12)\n      .tickFormat(function(d) {\n        return chartData[d].niceDateAbbrev;\n      })\n      .tickPadding(6);\n\n    let yAxis = d3\n      .axisRight(y)\n      .tickFormat(d => {\n        return numberFormatFn(d);\n      })\n      .ticks(6)\n      .tickPadding(6);\n\n    //////////////////////// Define the lines and/or areas  ////////////////////////\n\n    const lineOne = d3\n      .line()\n      .defined(function(d) {\n        if (d[yLineOne] !== null) {\n          return d[yLineOne];\n        }\n      })\n      .x((d, i) => {\n        console.log(i, d);\n        return x(i);\n      })\n      .y(d => y(d[yLineOne]));\n\n    const lineTwo = d3\n      .line()\n      .defined(function(d) {\n        if (d[yLineTwo] !== null) {\n          return d[yLineTwo];\n        }\n      })\n      .x((d, i) => {\n        console.log(i, d);\n        return x(i);\n      })\n      .y(d => y(d[yLineTwo]));\n\n    // //////////////////////// Define parent SVG  ////////////////////////\n\n    const CVsvg = d3\n      .select(containerElement)\n      .append(\"svg\")\n      .attr(\"width\", \"100%\")\n      .attr(\"height\", height + margin.top + margin.bottom + 40)\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    // //////////////////////// Loop through / sort data  ////////////////////////\n\n    chartData.forEach(d => {\n      d = +d;\n    });\n\n    // //////////////////////// Set the domains  ////////////////////////\n\n    x.domain([\n      parseInt(d3.min(chartData, (d, i) => i)),\n      parseInt(d3.max(chartData, (d, i) => i))\n    ]);\n    // y.domain([minVal, maxVal]);\n    y.domain([0, maxVal]);\n\n    // //////////////////////// Append the lines / areas  ////////////////////////\n\n    CVsvg.append(\"path\")\n      .datum(chartData)\n      .attr(\"class\", \"lineOne line\")\n      .attr(\"d\", lineOne)\n      .transition()\n      .duration(500);\n    CVsvg.append(\"path\")\n      .datum(chartData)\n      .attr(\"class\", \"lineTwo line\")\n      .attr(\"d\", lineTwo)\n      .transition()\n      .duration(500);\n\n    // ///////////////////////  Add the X & Y Axis  ////////////////////////\n\n    CVsvg.append(\"g\")\n      .attr(\"class\", \"yAxis\")\n      .attr(\"transform\", \"translate(\" + (width + 6) + \",0)\")\n      .call(yAxis);\n\n    CVsvg.append(\"g\")\n      .attr(\"class\", \"xAxis\")\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\n      .call(xAxis);\n\n    // //////////////////////// Add Line Tracing on mouse and markers   ////////////////////////\n\n    const lineTrace = CVsvg.append(\"line\")\n      .attr(\"class\", \"mouse-line x\")\n      .style(\"opacity\", 0.5)\n      .attr(\"y1\", 0)\n      .attr(\"y2\", height);\n\n    const marker = CVsvg.append(\"g\").attr(\"class\", \"marker\");\n\n    marker\n      .append(\"circle\")\n      .attr(\"class\", \"line-marker lineOne\")\n      .transition()\n      .duration(500)\n      .attr(\"r\", 5);\n\n    const marker2 = CVsvg.append(\"g\").attr(\"class\", \"marker\");\n    marker2\n      .append(\"circle\")\n      .attr(\"class\", \"line-marker lineTwo\")\n      .transition()\n      .duration(500)\n      .attr(\"r\", 5);\n\n    // //////////////////////// Tooltip  ////////////////////////\n\n    const tooltipDiv = d3\n      .select(containerElement)\n      .append(\"div\")\n      .attr(\"class\", \"tooltipDiv\");\n    const dateContainer = tooltipDiv\n      .append(\"div\")\n      .attr(\"class\", \"text-container\");\n    dateContainer\n      .append(\"div\")\n      .attr(\"class\", \"label-style mr-1\")\n      .text(\"Date\");\n    const dateText = dateContainer.append(\"div\").attr(\"class\", \"value-text\");\n    const lineOneTextContainer = tooltipDiv\n      .append(\"div\")\n      .attr(\"class\", \"text-container\");\n    lineOneTextContainer\n      .append(\"div\")\n      .attr(\"class\", \"label-style mr-1\")\n      .text(\"2018\");\n    lineOneTextContainer.append(\"div\").attr(\"class\", \"dot lineOne\");\n\n    const lineOneText = lineOneTextContainer\n      .append(\"div\")\n      .attr(\"class\", \"value-text\");\n    const lineTwoTextContainer = tooltipDiv\n      .append(\"div\")\n      .attr(\"class\", \"text-container\");\n    lineTwoTextContainer\n      .append(\"div\")\n      .attr(\"class\", \"label-style mr-1\")\n      .text(\"2019\");\n    lineTwoTextContainer.append(\"div\").attr(\"class\", \"dot lineTwo\");\n\n    const lineTwoText = lineTwoTextContainer\n      .append(\"div\")\n      .attr(\"class\", \"value-text\");\n    const YOYContainer = tooltipDiv\n      .append(\"div\")\n      .attr(\"class\", \"text-container\");\n    YOYContainer.append(\"div\")\n      .attr(\"class\", \"label-style mr-1\")\n      .text(\"YOY\");\n    const YOYText = YOYContainer.append(\"div\");\n\n    //////////////////////// Add Rect to Capture Mouse Movements  ////////////////////////\n\n    CVsvg.append(\"rect\")\n      .on(\"mouseover\", () => {\n        lineTrace.style(\"display\", null);\n        d3.select(\".mouse-line\").style(\"opacity\", \"1\");\n        d3.selectAll(\".mouse-per-line .line-marker\").style(\"opacity\", \"1\");\n      })\n      .on(\"mousemove\", () => {\n        let xy = d3.mouse(d3.event.currentTarget);\n\n        let x0 = x.invert(xy[0]);\n        let mouseIndex = justBisect(chartData, x0, 1);\n        let d0 = chartData[mouseIndex - 1];\n        let d1 = chartData[mouseIndex];\n        let d;\n        if (d1 !== undefined) {\n          d = x0 - chartData.indexOf(d0) > chartData.indexOf(d1) - x0 ? d1 : d0;\n        } else {\n          d = d0;\n        }\n\n        lineTrace.attr(\n          \"transform\",\n          \"translate(\" + x(chartData.indexOf(d)) + \",0)\"\n        );\n        marker.attr(\n          \"transform\",\n          \"translate(\" + x(chartData.indexOf(d)) + \",\" + y(d[yLineOne]) + \")\"\n        );\n\n        marker2.attr(\n          \"transform\",\n          \"translate(\" + x(chartData.indexOf(d)) + \",\" + y(d[yLineTwo]) + \")\"\n        );\n\n        let l1text = d[yLineOne] !== null ? numberFormatFn(d[yLineOne]) : \"\";\n        let l2text = d[yLineTwo] !== null ? numberFormatFn(d[yLineTwo]) : \"\";\n        // // YOYdiff = YOYdiff !== null ? numberFormatFn(YOYdiff) : \"\";\n        lineOneText.text(l1text);\n        lineTwoText.text(l2text);\n        dateText.text(d.niceDate + \" \" + d.niceTime);\n        // // YOYText.text(YOYdiff);\n        // // YOYText.attr(\"class\", YOYdiffColor);\n\n        d3.select(\".mouse-line.x\").attr(\"y2\", height);\n      })\n      .attr(\"class\", \"totalRect\")\n      .attr(\"fill\", \"none\")\n      .attr(\"x\", 0)\n      .attr(\"pointer-events\", \"all\")\n      .attr(\"width\", width)\n      .attr(\"transform\", \"translate(0,0)\")\n      .attr(\"height\", height)\n      .transition()\n      .duration(500);\n\n    //////////////////////// Set the data on load ////////////////////////\n\n    d3.set().add(chartData[chartData.length - 1]);\n    let d = chartData[chartData.length - 1];\n    lineTrace.attr(\"transform\", \"translate(\" + x(chartData.indexOf(d)) + \",0)\");\n    marker.attr(\n      \"transform\",\n      \"translate(\" + x(chartData.indexOf(d)) + \",\" + y(d[yLineOne]) + \")\"\n    );\n    marker2.attr(\n      \"transform\",\n      \"translate(\" + x(chartData.indexOf(d)) + \",\" + y(d[yLineTwo]) + \")\"\n    );\n\n    let l1text = d[yLineOne] !== null ? numberFormatFn(d[yLineOne]) : \"\";\n    let l2text = d[yLineTwo] !== null ? numberFormatFn(d[yLineTwo]) : \"\";\n    // // YOYdiff = YOYdiff !== null ? numberFormatFn(YOYdiff) : \"\";\n    lineOneText.text(l1text);\n    lineTwoText.text(l2text);\n    dateText.text(d.niceDate + \" \" + d.niceTime);\n    // // YOYText.text(YOYdiff);\n    // // YOYText.attr(\"class\", YOYdiffColor);\n\n    d3.select(\".mouse-line.x\").attr(\"y2\", height);\n  }\n\n  useEffect(() => {\n    createChart(chartData, \"price\", \"benchmark\");\n  }, []);\n\n  return <div ref={chart}></div>;\n}\n"]},"metadata":{},"sourceType":"module"}