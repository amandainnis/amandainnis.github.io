{"ast":null,"code":"import _regeneratorRuntime from\"/Users/amandainnis/amandainnis.github.io/amandainnis.github.io/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"/Users/amandainnis/amandainnis.github.io/amandainnis.github.io/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,createRef,useState}from\"react\";import*as Common from\"../reusable/common\";import CardFooter from\"../reusable/Card-Footer\";var imgInsightAnalytics=require(\"../../assets/images/drilldown_client-thumb.png\");var data={id:1,img:imgInsightAnalytics,title:\"Analytics\",subtitle:\"A Client Data Dashboard\",blurb:[\"Insight Analytics new containerized desktop application within the harbor framework.  It will provide analytical and reporting capabilities to Research Sales, Sales Traders and COO/Operations/Finance/Capital Markets personas.\",\"To showcase a user's client universe as relates to top buys / sells, client value, monthly CV totals with YOY comparison, CV by product, sector totals, percent change, sectors by client type. To focus or drilldown on these specific attributes--as well as readership, touchpoint and 13F dataâ€“as they relate to a client / ticker / sector \"],bkgd:\"var(--analytics-bkgd)\"};var backupPlan=[{\"Rank A: Real-Time Performance\":{\"Consumer Discretionary\":\"1.57\",\"Communication Services\":\"1.43\",Energy:\"1.31\",Materials:\"1.30\",Industrials:\"1.16\",\"Information Technology\":\"1.06\",Financials:\"0.77\",\"Real Estate\":\"0.22\",\"Health Care\":\"-0.33\",\"Consumer Staples\":\"-0.48\",Utilities:\"-0.88\"}}];var sectorUrl=\"https://www.alphavantage.co/query?function=SECTOR&apikey=NKT90SOYWKFBP04F\";function InsightAnalyticsCard(props){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),cardVisible=_useState4[0],setCardVisible=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),sectorData=_useState6[0],setSectorData=_useState6[1];function asyncFetch(){var res,myData,reformattedData,_reformattedData;return _regeneratorRuntime.async(function asyncFetch$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regeneratorRuntime.awrap(fetch(sectorUrl));case 3:res=_context.sent;_context.next=6;return _regeneratorRuntime.awrap(res.json());case 6:myData=_context.sent;reformattedData=addWidth(myData[\"Rank A: Real-Time Performance\"]);// console.log(reformattedData);\nsetIsLoading(false);setSectorData(reformattedData);_context.next=18;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.log(_context.t0);_reformattedData=addWidthRandom(backupPlan[0][\"Rank A: Real-Time Performance\"]);setIsLoading(false);setSectorData(_reformattedData);case 18:case\"end\":return _context.stop();}}},null,null,[[0,12]]);}function mapSectorBackgrounds(value){if(value===\"Communication Services\"){return\"var(--comm-services)\";}else if(value===\"Consumer Discretionary\"){return\"var(--con-discretionary)\";}else if(value===\"Consumer Staples\"){return\"var(--con-staples)\";}else if(value===\"Energy\"){return\"var(--energy)\";}else if(value===\"Financials\"){return\"var(--financials)\";}else if(value===\"Health Care\"){return\"var(--healthcare)\";}else if(value===\"Industrials\"){return\"var(--industrials)\";}else if(value===\"Information Technology\"){return\"var(--info-tech)\";}else if(value===\"Materials\"){return\"var(--materials)\";}else if(value===\"Real Estate\"){return\"var(--real-estate)\";}else if(value===\"Utilities\"){return\"var(--utilities)\";}}function addWidth(res){var newObject=mapObject(res);newObject=Common.bubbleSort(newObject);// console.log(newObject[0]);\nvar maxA=newObject[0].val;var maxB=newObject[newObject.length-1].val;var max=Math.abs(maxA)>Math.abs(maxB)?maxA:maxB;var finalObject=newObject.map(function(item){var width=Math.abs(Math.round(item.val/max*1000)/10);var color=mapSectorBackgrounds(item.name);return{name:item.name,val:item.val,isNegative:item.isNegative,width:width,color:color};});// console.log(finalObject);\nreturn finalObject;}function addWidthRandom(res){var newObject=mapObject(res);// console.log(newObject[0]);\nvar maxA=newObject[0].val;var maxB=newObject[newObject.length-1].val;var max=Math.abs(maxA)>Math.abs(maxB)?maxA:maxB;// fix the max and fix the weird decimal\nvar finalObject=newObject.map(function(item){var itemVal=Math.round(Math.random()*item.val*100)/100;var width=Math.abs(Math.round(itemVal/max*1000)/10);var color=mapSectorBackgrounds(item.name);return{name:item.name,val:itemVal,isNegative:item.isNegative,width:width,color:color};});finalObject=Common.bubbleSort(finalObject);// console.log(finalObject);\nreturn finalObject;}function mapObject(res){var tempArr=[];Object.entries(res).map(function(res,i){// console.log(res);\nvar temp=res[1].replace(/\\%/,\"\");temp=parseFloat(temp);var isNegative=temp<0?true:false;return tempArr.push({name:res[0],val:temp,isNegative:isNegative});});return tempArr;}function viewRole(){if(cardVisible){setCardVisible(false);}else{setCardVisible(true);}}useEffect(function(){asyncFetch();},[]);return React.createElement(\"article\",{className:\"portfolio-card\",style:{backgroundColor:data.bkgd}},cardVisible&&React.createElement(\"div\",{className:\"inner-wrapper\"},React.createElement(\"div\",{className:\"text-section\"},React.createElement(\"h1\",{className:\"title\"},data.title),React.createElement(\"h4\",{className:\"subtitle\"},data.subtitle)),React.createElement(\"div\",{className:\"flex-row\"},React.createElement(\"div\",{className:\"bar-graph-wrapper\"},React.createElement(\"div\",{className:\"bar-graph\"},sectorData!==null&&sectorData.map(function(res,i){if(res.val>=0){return React.createElement(\"div\",{key:i,className:\"flex-row-center narrow-row-height panel-row\"},React.createElement(\"div\",{className:\"colA\"}),React.createElement(\"div\",{className:\"colB\"},React.createElement(\"div\",{className:\"proportion-bar d-flex relative\",style:{width:res.width+\"%\",backgroundColor:res.color}}),React.createElement(\"div\",{className:\"percent-class right-absolute\"},res.val,\"%\"),React.createElement(\"div\",{className:\"flex1\"})));}else{return React.createElement(\"div\",{key:i,className:\"flex-row-center narrow-row-height panel-row\"},React.createElement(\"div\",{className:\"colA\"},React.createElement(\"div\",{className:\"proportion-bar d-flex relative\",style:{width:res.width+\"%\",backgroundColor:res.color}}),React.createElement(\"div\",{className:\"percent-class left-absolute\"},res.val,\"%\"),React.createElement(\"div\",{className:\"flex1\"})),React.createElement(\"div\",{className:\"colB\"}));}}))),React.createElement(\"div\",{className:\"legend\"},sectorData.current!==null&&sectorData.map(function(res,i){return React.createElement(\"div\",{key:\"legend-\".concat(i),className:\"flex-row-center narrow-row-height\"},React.createElement(\"div\",{className:\"square\",style:{backgroundColor:res.color}}),React.createElement(\"div\",{className:\"title cursor-pointer\"},res.name));})))),!cardVisible&&React.createElement(\"div\",{className:\"inner-wrapper\"},React.createElement(\"div\",{className:\"text-section\"},React.createElement(\"h1\",{className:\"title\"},\"About\")),React.createElement(\"div\",{className:\"role\"},React.createElement(\"div\",{className:\"text-width\"},\"It began as an award-winning 2019 hackathon project, of which I was the project manager, sole designer and one of the developers. It was later picked up by another group in the bank and grew into a production application\")),React.createElement(\"div\",{className:\"text-section\"},React.createElement(\"h1\",{className:\"title second-title-mt\"},\"My Role\")),React.createElement(\"div\",{className:\"role\"},React.createElement(\"div\",{className:\"text-width\"},React.createElement(\"div\",{className:\"flex-row\"},React.createElement(\"span\",{className:\"title\"},\"Prod Application: \"),\"UX, UI, Angular, D3.js, SCSS\"),React.createElement(\"div\",{className:\"flex-row\"},React.createElement(\"span\",{className:\"title\"},\"Portfolio Spinoff: \"),\"Design, React, D3.js, SCSS\")))),React.createElement(CardFooter,{roleBool:cardVisible,viewRole:viewRole,borderColor:\"var(--energy)\"}));}export default InsightAnalyticsCard;","map":{"version":3,"sources":["/Users/amandainnis/amandainnis.github.io/amandainnis.github.io/src/components/insightAnalytics/InsightAnalyticsCard.js"],"names":["React","useEffect","createRef","useState","Common","CardFooter","imgInsightAnalytics","require","data","id","img","title","subtitle","blurb","bkgd","backupPlan","Energy","Materials","Industrials","Financials","Utilities","sectorUrl","InsightAnalyticsCard","props","isLoading","setIsLoading","cardVisible","setCardVisible","sectorData","setSectorData","asyncFetch","fetch","res","json","myData","reformattedData","addWidth","console","log","addWidthRandom","mapSectorBackgrounds","value","newObject","mapObject","bubbleSort","maxA","val","maxB","length","max","Math","abs","finalObject","map","item","width","round","color","name","isNegative","itemVal","random","tempArr","Object","entries","i","temp","replace","parseFloat","push","viewRole","backgroundColor","current"],"mappings":"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","sourcesContent":["import React, { useEffect, createRef, useState } from \"react\";\nimport * as Common from \"../reusable/common\";\nimport CardFooter from \"../reusable/Card-Footer\";\nconst imgInsightAnalytics = require(\"../../assets/images/drilldown_client-thumb.png\");\nconst data = {\n  id: 1,\n  img: imgInsightAnalytics,\n  title: \"Analytics\",\n  subtitle: \"A Client Data Dashboard\",\n  blurb: [\n    \"Insight Analytics new containerized desktop application within the harbor framework.  It will provide analytical and reporting capabilities to Research Sales, Sales Traders and COO/Operations/Finance/Capital Markets personas.\",\n    \"To showcase a user's client universe as relates to top buys / sells, client value, monthly CV totals with YOY comparison, CV by product, sector totals, percent change, sectors by client type. To focus or drilldown on these specific attributes--as well as readership, touchpoint and 13F dataâ€“as they relate to a client / ticker / sector \"\n  ],\n  bkgd: \"var(--analytics-bkgd)\"\n};\nconst backupPlan = [\n  {\n    \"Rank A: Real-Time Performance\": {\n      \"Consumer Discretionary\": \"1.57\",\n      \"Communication Services\": \"1.43\",\n      Energy: \"1.31\",\n      Materials: \"1.30\",\n      Industrials: \"1.16\",\n      \"Information Technology\": \"1.06\",\n      Financials: \"0.77\",\n      \"Real Estate\": \"0.22\",\n      \"Health Care\": \"-0.33\",\n      \"Consumer Staples\": \"-0.48\",\n      Utilities: \"-0.88\"\n    }\n  }\n];\nconst sectorUrl =\n  \"https://www.alphavantage.co/query?function=SECTOR&apikey=NKT90SOYWKFBP04F\";\n\nfunction InsightAnalyticsCard(props) {\n  const [isLoading, setIsLoading] = useState(true);\n  const [cardVisible, setCardVisible] = useState(true);\n\n  const [sectorData, setSectorData] = useState([]);\n\n  async function asyncFetch() {\n    try {\n      const res = await fetch(sectorUrl);\n      const myData = await res.json();\n      let reformattedData = addWidth(myData[\"Rank A: Real-Time Performance\"]);\n      // console.log(reformattedData);\n      setIsLoading(false);\n      setSectorData(reformattedData);\n    } catch (err) {\n      console.log(err);\n      let reformattedData = addWidthRandom(\n        backupPlan[0][\"Rank A: Real-Time Performance\"]\n      );\n      setIsLoading(false);\n      setSectorData(reformattedData);\n    }\n  }\n\n  function mapSectorBackgrounds(value) {\n    if (value === \"Communication Services\") {\n      return \"var(--comm-services)\";\n    } else if (value === \"Consumer Discretionary\") {\n      return \"var(--con-discretionary)\";\n    } else if (value === \"Consumer Staples\") {\n      return \"var(--con-staples)\";\n    } else if (value === \"Energy\") {\n      return \"var(--energy)\";\n    } else if (value === \"Financials\") {\n      return \"var(--financials)\";\n    } else if (value === \"Health Care\") {\n      return \"var(--healthcare)\";\n    } else if (value === \"Industrials\") {\n      return \"var(--industrials)\";\n    } else if (value === \"Information Technology\") {\n      return \"var(--info-tech)\";\n    } else if (value === \"Materials\") {\n      return \"var(--materials)\";\n    } else if (value === \"Real Estate\") {\n      return \"var(--real-estate)\";\n    } else if (value === \"Utilities\") {\n      return \"var(--utilities)\";\n    }\n  }\n\n  function addWidth(res) {\n    let newObject = mapObject(res);\n    newObject = Common.bubbleSort(newObject);\n    // console.log(newObject[0]);\n    let maxA = newObject[0].val;\n    let maxB = newObject[newObject.length - 1].val;\n    let max = Math.abs(maxA) > Math.abs(maxB) ? maxA : maxB;\n\n    let finalObject = newObject.map(item => {\n      let width = Math.abs(Math.round((item.val / max) * 1000) / 10);\n      let color = mapSectorBackgrounds(item.name);\n      return {\n        name: item.name,\n        val: item.val,\n        isNegative: item.isNegative,\n        width: width,\n        color: color\n      };\n    });\n    // console.log(finalObject);\n    return finalObject;\n  }\n  function addWidthRandom(res) {\n    let newObject = mapObject(res);\n\n    // console.log(newObject[0]);\n    let maxA = newObject[0].val;\n    let maxB = newObject[newObject.length - 1].val;\n    let max = Math.abs(maxA) > Math.abs(maxB) ? maxA : maxB;\n    // fix the max and fix the weird decimal\n    let finalObject = newObject.map(item => {\n      let itemVal = Math.round(Math.random() * item.val * 100) / 100;\n      let width = Math.abs(Math.round((itemVal / max) * 1000) / 10);\n      let color = mapSectorBackgrounds(item.name);\n      return {\n        name: item.name,\n        val: itemVal,\n        isNegative: item.isNegative,\n        width: width,\n        color: color\n      };\n    });\n    finalObject = Common.bubbleSort(finalObject);\n    // console.log(finalObject);\n    return finalObject;\n  }\n  function mapObject(res) {\n    let tempArr = [];\n    Object.entries(res).map((res, i) => {\n      // console.log(res);\n      let temp = res[1].replace(/\\%/, \"\");\n      temp = parseFloat(temp);\n      let isNegative = temp < 0 ? true : false;\n      return tempArr.push({\n        name: res[0],\n        val: temp,\n        isNegative: isNegative\n      });\n    });\n    return tempArr;\n  }\n  function viewRole() {\n    if (cardVisible) {\n      setCardVisible(false);\n    } else {\n      setCardVisible(true);\n    }\n  }\n  useEffect(() => {\n    asyncFetch();\n  }, []);\n\n  return (\n    <article className=\"portfolio-card\" style={{ backgroundColor: data.bkgd }}>\n      {cardVisible && (\n        <div className=\"inner-wrapper\">\n          <div className=\"text-section\">\n            <h1 className=\"title\">{data.title}</h1>\n            <h4 className=\"subtitle\">{data.subtitle}</h4>\n          </div>\n          <div className=\"flex-row\">\n            <div className=\"bar-graph-wrapper\">\n              <div className=\"bar-graph\">\n                {/* {myData[0].val} */}\n                {sectorData !== null &&\n                  sectorData.map((res, i) => {\n                    if (res.val >= 0) {\n                      return (\n                        <div\n                          key={i}\n                          className=\"flex-row-center narrow-row-height panel-row\"\n                        >\n                          <div className=\"colA\"></div>\n                          <div className=\"colB\">\n                            <div\n                              className=\"proportion-bar d-flex relative\"\n                              style={{\n                                width: res.width + \"%\",\n                                backgroundColor: res.color\n                              }}\n                            ></div>\n                            <div className=\"percent-class right-absolute\">\n                              {res.val}%\n                            </div>\n                            <div className=\"flex1\"></div>\n                          </div>\n                        </div>\n                      );\n                    } else {\n                      return (\n                        <div\n                          key={i}\n                          className=\"flex-row-center narrow-row-height panel-row\"\n                        >\n                          <div className=\"colA\">\n                            <div\n                              className=\"proportion-bar d-flex relative\"\n                              style={{\n                                width: res.width + \"%\",\n                                backgroundColor: res.color\n                              }}\n                            ></div>\n                            <div className=\"percent-class left-absolute\">\n                              {res.val}%\n                            </div>\n                            <div className=\"flex1\"></div>\n                          </div>\n                          <div className=\"colB\"></div>\n                        </div>\n                      );\n                    }\n                  })}\n              </div>\n            </div>\n\n            <div className=\"legend\">\n              {sectorData.current !== null &&\n                sectorData.map((res, i) => {\n                  return (\n                    <div\n                      key={`legend-${i}`}\n                      className=\"flex-row-center narrow-row-height\"\n                    >\n                      <div\n                        className=\"square\"\n                        style={{\n                          backgroundColor: res.color\n                        }}\n                      ></div>\n                      <div className=\"title cursor-pointer\">{res.name}</div>\n                    </div>\n                  );\n                })}\n            </div>\n          </div>\n        </div>\n      )}\n      {!cardVisible && (\n        <div className=\"inner-wrapper\">\n          <div className=\"text-section\">\n            <h1 className=\"title\">About</h1>\n          </div>\n          <div className=\"role\">\n            <div className=\"text-width\">\n              It began as an award-winning 2019 hackathon project, of which I\n              was the project manager, sole designer and one of the developers.\n              It was later picked up by another group in the bank and grew into\n              a production application\n            </div>\n          </div>\n          <div className=\"text-section\">\n            <h1 className=\"title second-title-mt\">My Role</h1>\n          </div>\n\n          <div className=\"role\">\n            <div className=\"text-width\">\n              <div className=\"flex-row\">\n                <span className=\"title\">Prod Application: </span>UX, UI,\n                Angular, D3.js, SCSS\n              </div>\n              <div className=\"flex-row\">\n                <span className=\"title\">Portfolio Spinoff: </span>Design, React,\n                D3.js, SCSS\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n      <CardFooter\n        roleBool={cardVisible}\n        viewRole={viewRole}\n        borderColor={\"var(--energy)\"}\n      />\n    </article>\n  );\n}\n\nexport default InsightAnalyticsCard;\n"]},"metadata":{},"sourceType":"module"}