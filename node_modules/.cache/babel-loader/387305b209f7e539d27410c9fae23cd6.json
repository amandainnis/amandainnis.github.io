{"ast":null,"code":"import _slicedToArray from\"/Users/amandainnis/amandainnis.github.io/amandainnis.github.io/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{createRef,useState,useEffect}from\"react\";import*as d3 from\"../../../node_modules/d3/dist/d3.node\";import*as DataHandler from\"../../data/DataHandler\";export default function Pie(){var chart=createRef();var chartContainer=createRef();var w=300;var h=300;var r=100;var containerElement;var chartContainerElement;var _useState=useState(DataHandler.createPieData()),_useState2=_slicedToArray(_useState,2),chartData=_useState2[0],setChartData=_useState2[1];function renderChart(values,labels,toolTipValues){containerElement=chart.current;containerElement.innerHTML=\"\";var tooltip=d3.select(containerElement).append(\"div\").attr(\"class\",\"d3-tooltip\");var borderParent=tooltip.append(\"div\").attr(\"class\",\"border-class\");var d3InnerTooltip=tooltip.append(\"div\").attr(\"class\",\"d3-tooltip-inner\");d3InnerTooltip.append(\"div\").attr(\"class\",\"d3-title\");d3InnerTooltip.append(\"div\").attr(\"class\",\"amount\");var vis=d3.select(containerElement).append(\"svg:svg\").attr(\"preserveAspectRatio\",\"xMinYMin meet\")// the 300 and 300 represents height and width, viewbox is necessary for responsive sizing\n.attr(\"viewBox\",\"0 0 200 200\").data([chartData]).attr(\"class\",\"mamaSVG\").append(\"g\").attr(\"class\",\"bigSVG\")// move the center of the pie chart from 0, 0 to radius, radius\n.attr(\"transform\",\"translate(\"+r+\",\"+r+\")\");var arc=d3.arc().outerRadius(r).innerRadius(40);// this will create arc data for us given a list of values\nvar pie=d3.pie()// we must tell it out to access the value of each element in our data array\n.value(function(d){//console.log(d[values]);\nreturn parseFloat(d[values]);});// this selects all <g> elements with class slice (there aren't any yet)\nvar arcs=vis.selectAll(\"g\").attr(\"class\",\"slice\")// associate the generated pie data (an array of arcs, each having startAngle, endAngle and value properties)\n// creating a <g> for every object in the data array\n.data(pie).enter();arcs.append(\"svg:path\").attr(\"class\",\"arcs\")// set the color for each slice to be chosen from the color function defined above\n.attr(\"fill\",function(d,i){// console.log(d.data[colors]);\nreturn d.data.color;})// this creates the actual SVG path using the associated data (pie) with the arc drawing function\n.attr(\"d\",arc)// .attr('id', function (d) {\n//   return (d.data[labels]).replace(/\\s/g, '');\n// })\n.text(function(d){return d;}).on(\"mouseenter\",function(d,i){var title=d.data[labels];var total=d.data[toolTipValues];// let border = d.data[borderClass];\nborderParent.style(\"background-color\",d.data.color);d3InnerTooltip.select(\".d3-title\").text(d.data[labels]);d3InnerTooltip.select(\".amount\").text(d.data[toolTipValues]);tooltip.style(\"display\",\"flex\");tooltip.style(\"opacity\",1);}).on(\"mousemove\",function(d){tooltip.style(\"top\",d3.event.clientY+30+\"px\").style(\"left\",d3.event.clientX-25+\"px\");});var outervis=d3.select(chartContainer.current).on(\"mouseleave\",function(){tooltip.style(\"opacity\",0);});}useEffect(function(){renderChart(\"value\",\"label\",\"toolTipValue\");},[]);return React.createElement(\"div\",{className:\"pie-chart pie-svg-container\",ref:chartContainer},React.createElement(\"div\",{ref:chart}));}","map":{"version":3,"sources":["/Users/amandainnis/amandainnis.github.io/amandainnis.github.io/src/components/reusable/Pie.js"],"names":["React","createRef","useState","useEffect","d3","DataHandler","Pie","chart","chartContainer","w","h","r","containerElement","chartContainerElement","createPieData","chartData","setChartData","renderChart","values","labels","toolTipValues","current","innerHTML","tooltip","select","append","attr","borderParent","d3InnerTooltip","vis","data","arc","outerRadius","innerRadius","pie","value","d","parseFloat","arcs","selectAll","enter","i","color","text","on","title","total","style","event","clientY","clientX","outervis"],"mappings":"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","sourcesContent":["import React, { createRef, useState, useEffect } from \"react\";\nimport * as d3 from \"../../../node_modules/d3/dist/d3.node\";\nimport * as DataHandler from \"../../data/DataHandler\";\n\nexport default function Pie() {\n  const chart = createRef();\n  const chartContainer = createRef();\n  const w = 300;\n  const h = 300;\n  const r = 100;\n  var containerElement;\n  var chartContainerElement;\n  const [chartData, setChartData] = useState(DataHandler.createPieData());\n\n  function renderChart(values, labels, toolTipValues) {\n    containerElement = chart.current;\n    containerElement.innerHTML = \"\";\n    const tooltip = d3\n      .select(containerElement)\n      .append(\"div\")\n      .attr(\"class\", \"d3-tooltip\");\n    const borderParent = tooltip.append(\"div\").attr(\"class\", \"border-class\");\n    const d3InnerTooltip = tooltip\n      .append(\"div\")\n      .attr(\"class\", \"d3-tooltip-inner\");\n    d3InnerTooltip.append(\"div\").attr(\"class\", \"d3-title\");\n    d3InnerTooltip.append(\"div\").attr(\"class\", \"amount\");\n    const vis = d3\n      .select(containerElement)\n      .append(\"svg:svg\")\n      .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\n      // the 300 and 300 represents height and width, viewbox is necessary for responsive sizing\n      .attr(\"viewBox\", \"0 0 200 200\")\n      .data([chartData])\n      .attr(\"class\", \"mamaSVG\")\n      .append(\"g\")\n      .attr(\"class\", \"bigSVG\")\n      // move the center of the pie chart from 0, 0 to radius, radius\n      .attr(\"transform\", \"translate(\" + r + \",\" + r + \")\");\n\n    const arc = d3\n      .arc()\n      .outerRadius(r)\n      .innerRadius(40);\n\n    // this will create arc data for us given a list of values\n    const pie = d3\n      .pie()\n      // we must tell it out to access the value of each element in our data array\n      .value(d => {\n        //console.log(d[values]);\n        return parseFloat(d[values]);\n      });\n    // this selects all <g> elements with class slice (there aren't any yet)\n\n    const arcs = vis\n      .selectAll(\"g\")\n      .attr(\"class\", \"slice\")\n      // associate the generated pie data (an array of arcs, each having startAngle, endAngle and value properties)\n      // creating a <g> for every object in the data array\n      .data(pie)\n      .enter();\n\n    arcs\n      .append(\"svg:path\")\n      .attr(\"class\", \"arcs\")\n      // set the color for each slice to be chosen from the color function defined above\n      .attr(\"fill\", (d, i) => {\n        // console.log(d.data[colors]);\n        return d.data.color;\n      })\n      // this creates the actual SVG path using the associated data (pie) with the arc drawing function\n      .attr(\"d\", arc)\n      // .attr('id', function (d) {\n      //   return (d.data[labels]).replace(/\\s/g, '');\n      // })\n      .text(function(d) {\n        return d;\n      })\n\n      .on(\"mouseenter\", function(d, i) {\n        const title = d.data[labels];\n        const total = d.data[toolTipValues];\n        // let border = d.data[borderClass];\n        borderParent.style(\"background-color\", d.data.color);\n\n        d3InnerTooltip.select(\".d3-title\").text(d.data[labels]);\n        d3InnerTooltip.select(\".amount\").text(d.data[toolTipValues]);\n        tooltip.style(\"display\", \"flex\");\n        tooltip.style(\"opacity\", 1);\n      })\n      .on(\"mousemove\", function(d) {\n        tooltip\n          .style(\"top\", d3.event.clientY + 30 + \"px\")\n          .style(\"left\", d3.event.clientX - 25 + \"px\");\n      });\n\n    const outervis = d3\n      .select(chartContainer.current)\n      .on(\"mouseleave\", function() {\n        tooltip.style(\"opacity\", 0);\n      });\n  }\n\n  useEffect(() => {\n    renderChart(\"value\", \"label\", \"toolTipValue\");\n  }, []);\n\n  return (\n    <div className=\"pie-chart pie-svg-container\" ref={chartContainer}>\n      <div ref={chart}></div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}