{"ast":null,"code":"var _jsxFileName = \"/Users/amandainnis/ReactProjects/board-app/src/components/insightAnalytics/InsightAnalyticsCard.js\";\nimport React from \"react\";\nimport * as Common from \"../reusable/common\";\n\nconst imgInsightAnalytics = require(\"../../assets/images/drilldown_client-thumb.png\");\n\nconst data = {\n  id: 1,\n  img: imgInsightAnalytics,\n  title: \"Insight Analytics\",\n  subtitle: \"A Client Data Dashboard\",\n  blurb: [\"Insight Analytics new containerized desktop application within the harbor framework.  It will provide analytical and reporting capabilities to Research Sales, Sales Traders and COO/Operations/Finance/Capital Markets personas.\", \"To showcase a user's client universe as relates to top buys / sells, client value, monthly CV totals with YOY comparison, CV by product, sector totals, percent change, sectors by client type. To focus or drilldown on these specific attributes--as well as readership, touchpoint and 13F data–as they relate to a client / ticker / sector \"],\n  bkgd: \"var(--analytics-bkgd)\"\n};\nconst backupPlan = [{\n  \"Rank A: Real-Time Performance\": {\n    \"Consumer Discretionary\": \"1.57%\",\n    \"Communication Services\": \"1.43%\",\n    Energy: \"1.31%\",\n    Materials: \"1.30%\",\n    Industrials: \"1.16%\",\n    \"Information Technology\": \"1.06%\",\n    Financials: \"0.77%\",\n    \"Real Estate\": \"0.22%\",\n    \"Health Care\": \"-0.33%\",\n    \"Consumer Staples\": \"-0.48%\",\n    Utilities: \"-0.88%\"\n  }\n}];\nconst sectorUrl = \"https://www.alphavantage.co/query?function=SECTOR&apikey=NKT90SOYWKFBP04F\"; // const backupPlan = [\n//   {\n//     \"Rank A: Real-Time Performance\": {\n//       \"Consumer Discretionary\": \"1.57%\",\n//       \"Consumer Staples\": \"-0.48%\",\n//       Energy: \"1.31%\",\n//       \"Materials\": \"1.30%\",\n//       \"Industrials\": \"1.16%\",\n//       \"Information Technology\": \"1.06%\",\n//       \"Financials\": \"0.77%\",\n//       \"Real Estate\": \"0.22%\",\n//       \"Communication Services\": \"1.43%\",\n//       \"Health Care\": \"-0.33%\",\n//       Utilities: \"-0.88%\"\n//     }\n//   }\n// ];\n\nclass InsightAnalyticsCard extends React.Component {\n  constructor(props) {\n    super(props); // console.log(backupPlan[0][\"Rank A: Real-Time Performance\"]);\n\n    this._isMounted = false;\n    this.state = {\n      isLoading: false,\n      sectorData: null\n    };\n    this.resolveFetchedSectors = this.resolveFetchedSectors.bind(this);\n  }\n\n  fetchSectors() {\n    return fetch(sectorUrl).then(res => {\n      if (!res.ok) {\n        // throw Error ('sadface');\n        return backupPlan[0];\n      }\n\n      return res;\n    }).then(res => res.json());\n  }\n\n  resolveFetchedSectors(_isMounted) {\n    this.setState({\n      isLoading: true\n    });\n    this.fetchSectors().then(res => {\n      if (_isMounted) {\n        if (res !== undefined && res[\"Rank A: Real-Time Performance\"] !== undefined) {\n          // console.log(res[\"Rank A: Real-Time Performance\"]);\n          let data = this.addWidth(res[\"Rank A: Real-Time Performance\"]);\n          console.log(data);\n          this.setState({\n            isLoading: false,\n            sectorData: data\n          });\n        } else {\n          this.setState({\n            isLoading: false,\n            sectorData: null\n          });\n        }\n      }\n    });\n  }\n\n  mapSectorBackgrounds(value) {\n    if (value === \"Communication Services\") {\n      return \"var(--comm-services)\";\n    } else if (value === \"Consumer Discretionary\") {\n      return \"var(--con-discretionary)\";\n    } else if (value === \"Consumer Staples\") {\n      return \"var(--con-staples)\";\n    } else if (value === \"Energy\") {\n      return \"var(--energy)\";\n    } else if (value === \"Financials\") {\n      return \"var(--financials)\";\n    } else if (value === \"Health Care\") {\n      return \"var(--healthcare)\";\n    } else if (value === \"Industrials\") {\n      return \"var(--industrials)\";\n    } else if (value === \"Information Technology\") {\n      return \"var(--info-tech)\";\n    } else if (value === \"Materials\") {\n      return \"var(--materials)\";\n    } else if (value === \"Real Estate\") {\n      return \"var(--real-estate)\";\n    } else if (value === \"Utilities\") {\n      return \"var(--utilities)\";\n    }\n  }\n\n  addWidth(res) {\n    let newObject = this.mapObject(res); // since it's already sorted, just use 0 as max\n\n    newObject = Common.mergeSort(newObject); // console.log(newObject);\n\n    let maxA = newObject[0].val;\n    let maxB = newObject[newObject.length - 1].val;\n    let max = Math.abs(maxA) > Math.abs(maxB) ? maxA : maxB;\n    let finalObject = newObject.map(item => {\n      let width = Math.abs(Math.round(item.val / max * 1000) / 10);\n      let color = this.mapSectorBackgrounds(item.name);\n      return {\n        name: item.name,\n        val: item.val,\n        isNegative: item.isNegative,\n        width: width,\n        color: color\n      };\n    }); // console.log(finalObject);\n\n    return finalObject;\n  }\n\n  mapObject(res) {\n    let tempArr = [];\n    Object.entries(res).map((res, i) => {\n      // console.log(res);\n      let temp = res[1].replace(/\\%/, \"\");\n      temp = parseFloat(temp);\n      let isNegative = temp < 0 ? true : false;\n      tempArr.push({\n        name: res[0],\n        val: temp,\n        isNegative: isNegative\n      });\n    });\n    return tempArr;\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.resolveFetchedSectors(this._isMounted); // const newObject = this.mapObject(this.state.sectorData);\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  render() {\n    const newObject = this.state.sectorData;\n    return React.createElement(\"article\", {\n      className: \"portfolio-card\",\n      style: {\n        backgroundColor: data.bkgd\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"text-section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, data.title), React.createElement(\"h4\", {\n      className: \"subtitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, data.subtitle)), React.createElement(\"div\", {\n      className: \"flex-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"bar-graph-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"bar-graph\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, newObject !== null && newObject.map((res, i) => {\n      if (res.val >= 0) {\n        return React.createElement(\"div\", {\n          key: i,\n          className: \"flex-row-center narrow-row-height panel-row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"colA\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"colB\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"proportion-bar d-flex relative\",\n          style: {\n            width: res.width + \"%\",\n            backgroundColor: res.color\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"percent-class right-absolute\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208\n          },\n          __self: this\n        }, res.val, \"%\"), React.createElement(\"div\", {\n          className: \"flex1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 211\n          },\n          __self: this\n        })));\n      } else {\n        return React.createElement(\"div\", {\n          key: i,\n          className: \"flex-row-center narrow-row-height panel-row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"colA\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"proportion-bar d-flex relative\",\n          style: {\n            width: res.width + \"%\",\n            backgroundColor: res.color\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 222\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"percent-class left-absolute\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229\n          },\n          __self: this\n        }, res.val, \"%\"), React.createElement(\"div\", {\n          className: \"flex1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 232\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"colB\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234\n          },\n          __self: this\n        }));\n      }\n    }))), React.createElement(\"div\", {\n      className: \"legend\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, newObject !== null && newObject.map((res, i) => {\n      return React.createElement(\"div\", {\n        key: \"legend-\".concat(i),\n        className: \"flex-row-center narrow-row-height\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"square\",\n        style: {\n          backgroundColor: res.color\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"title cursor-pointer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, res.name));\n    }))));\n  }\n\n}\n\nexport default InsightAnalyticsCard;","map":{"version":3,"sources":["/Users/amandainnis/ReactProjects/board-app/src/components/insightAnalytics/InsightAnalyticsCard.js"],"names":["React","Common","imgInsightAnalytics","require","data","id","img","title","subtitle","blurb","bkgd","backupPlan","Energy","Materials","Industrials","Financials","Utilities","sectorUrl","InsightAnalyticsCard","Component","constructor","props","_isMounted","state","isLoading","sectorData","resolveFetchedSectors","bind","fetchSectors","fetch","then","res","ok","json","setState","undefined","addWidth","console","log","mapSectorBackgrounds","value","newObject","mapObject","mergeSort","maxA","val","maxB","length","max","Math","abs","finalObject","map","item","width","round","color","name","isNegative","tempArr","Object","entries","i","temp","replace","parseFloat","push","componentDidMount","componentWillUnmount","render","backgroundColor"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport * as Common from \"../reusable/common\";\nconst imgInsightAnalytics = require(\"../../assets/images/drilldown_client-thumb.png\");\nconst data = {\n  id: 1,\n  img: imgInsightAnalytics,\n  title: \"Insight Analytics\",\n  subtitle: \"A Client Data Dashboard\",\n  blurb: [\n    \"Insight Analytics new containerized desktop application within the harbor framework.  It will provide analytical and reporting capabilities to Research Sales, Sales Traders and COO/Operations/Finance/Capital Markets personas.\",\n    \"To showcase a user's client universe as relates to top buys / sells, client value, monthly CV totals with YOY comparison, CV by product, sector totals, percent change, sectors by client type. To focus or drilldown on these specific attributes--as well as readership, touchpoint and 13F data–as they relate to a client / ticker / sector \"\n  ],\n  bkgd: \"var(--analytics-bkgd)\"\n};\nconst backupPlan = [\n  {\n    \"Rank A: Real-Time Performance\": {\n      \"Consumer Discretionary\": \"1.57%\",\n      \"Communication Services\": \"1.43%\",\n      Energy: \"1.31%\",\n      Materials: \"1.30%\",\n      Industrials: \"1.16%\",\n      \"Information Technology\": \"1.06%\",\n      Financials: \"0.77%\",\n      \"Real Estate\": \"0.22%\",\n      \"Health Care\": \"-0.33%\",\n      \"Consumer Staples\": \"-0.48%\",\n      Utilities: \"-0.88%\"\n    }\n  }\n];\n\nconst sectorUrl =\n  \"https://www.alphavantage.co/query?function=SECTOR&apikey=NKT90SOYWKFBP04F\";\n// const backupPlan = [\n//   {\n//     \"Rank A: Real-Time Performance\": {\n//       \"Consumer Discretionary\": \"1.57%\",\n//       \"Consumer Staples\": \"-0.48%\",\n\n//       Energy: \"1.31%\",\n//       \"Materials\": \"1.30%\",\n//       \"Industrials\": \"1.16%\",\n//       \"Information Technology\": \"1.06%\",\n//       \"Financials\": \"0.77%\",\n//       \"Real Estate\": \"0.22%\",\n//       \"Communication Services\": \"1.43%\",\n//       \"Health Care\": \"-0.33%\",\n\n//       Utilities: \"-0.88%\"\n//     }\n//   }\n// ];\nclass InsightAnalyticsCard extends React.Component {\n  _isMounted = false;\n  constructor(props) {\n    super(props);\n    // console.log(backupPlan[0][\"Rank A: Real-Time Performance\"]);\n    this.state = {\n      isLoading: false,\n      sectorData: null\n    };\n    this.resolveFetchedSectors = this.resolveFetchedSectors.bind(this);\n  }\n\n  fetchSectors() {\n    return fetch(sectorUrl)\n      .then(res => {\n        if (!res.ok) {\n          // throw Error ('sadface');\n          return backupPlan[0];\n        }\n        return res;\n      })\n      .then(res => res.json());\n  }\n  resolveFetchedSectors(_isMounted) {\n    this.setState({\n      isLoading: true\n    });\n    this.fetchSectors().then(res => {\n      if (_isMounted) {\n        if (\n          res !== undefined &&\n          res[\"Rank A: Real-Time Performance\"] !== undefined\n        ) {\n          // console.log(res[\"Rank A: Real-Time Performance\"]);\n          let data = this.addWidth(res[\"Rank A: Real-Time Performance\"]);\n          console.log(data);\n          this.setState({\n            isLoading: false,\n            sectorData: data\n          });\n        } else {\n          this.setState({\n            isLoading: false,\n            sectorData: null\n          });\n        }\n      }\n    });\n  }\n\n  mapSectorBackgrounds(value) {\n    if (value === \"Communication Services\") {\n      return \"var(--comm-services)\";\n    } else if (value === \"Consumer Discretionary\") {\n      return \"var(--con-discretionary)\";\n    } else if (value === \"Consumer Staples\") {\n      return \"var(--con-staples)\";\n    } else if (value === \"Energy\") {\n      return \"var(--energy)\";\n    } else if (value === \"Financials\") {\n      return \"var(--financials)\";\n    } else if (value === \"Health Care\") {\n      return \"var(--healthcare)\";\n    } else if (value === \"Industrials\") {\n      return \"var(--industrials)\";\n    } else if (value === \"Information Technology\") {\n      return \"var(--info-tech)\";\n    } else if (value === \"Materials\") {\n      return \"var(--materials)\";\n    } else if (value === \"Real Estate\") {\n      return \"var(--real-estate)\";\n    } else if (value === \"Utilities\") {\n      return \"var(--utilities)\";\n    }\n  }\n\n  addWidth(res) {\n    let newObject = this.mapObject(res);\n    // since it's already sorted, just use 0 as max\n    newObject = Common.mergeSort(newObject);\n    // console.log(newObject);\n    let maxA = newObject[0].val;\n    let maxB = newObject[newObject.length - 1].val;\n    let max = Math.abs(maxA) > Math.abs(maxB) ? maxA : maxB;\n\n    let finalObject = newObject.map(item => {\n      let width = Math.abs(Math.round((item.val / max) * 1000) / 10);\n      let color = this.mapSectorBackgrounds(item.name);\n      return {\n        name: item.name,\n        val: item.val,\n        isNegative: item.isNegative,\n        width: width,\n        color: color\n      };\n    });\n    // console.log(finalObject);\n    return finalObject;\n  }\n  mapObject(res) {\n    let tempArr = [];\n    Object.entries(res).map((res, i) => {\n      // console.log(res);\n      let temp = res[1].replace(/\\%/, \"\");\n      temp = parseFloat(temp);\n      let isNegative = temp < 0 ? true : false;\n      tempArr.push({\n        name: res[0],\n        val: temp,\n        isNegative: isNegative\n      });\n    });\n    return tempArr;\n  }\n  componentDidMount() {\n    this._isMounted = true;\n    this.resolveFetchedSectors(this._isMounted);\n    // const newObject = this.mapObject(this.state.sectorData);\n  }\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n  render() {\n    const newObject = this.state.sectorData;\n\n    return (\n      <article\n        className=\"portfolio-card\"\n        style={{ backgroundColor: data.bkgd }}\n      >\n        <div className=\"text-section\">\n          <h1 className=\"title\">{data.title}</h1>\n          <h4 className=\"subtitle\">{data.subtitle}</h4>\n        </div>\n        <div className=\"flex-row\">\n          <div className=\"bar-graph-wrapper\">\n            <div className=\"bar-graph\">\n              {newObject !== null &&\n                newObject.map((res, i) => {\n                  if (res.val >= 0) {\n                    return (\n                      <div\n                        key={i}\n                        className=\"flex-row-center narrow-row-height panel-row\"\n                      >\n                        <div className=\"colA\"></div>\n                        <div className=\"colB\">\n                          <div\n                            className=\"proportion-bar d-flex relative\"\n                            style={{\n                              width: res.width + \"%\",\n                              backgroundColor: res.color\n                            }}\n                          ></div>\n                          <div className=\"percent-class right-absolute\">\n                            {res.val}%\n                          </div>\n                          <div className=\"flex1\"></div>\n                        </div>\n                      </div>\n                    );\n                  } else {\n                    return (\n                      <div\n                        key={i}\n                        className=\"flex-row-center narrow-row-height panel-row\"\n                      >\n                        <div className=\"colA\">\n                          <div\n                            className=\"proportion-bar d-flex relative\"\n                            style={{\n                              width: res.width + \"%\",\n                              backgroundColor: res.color\n                            }}\n                          ></div>\n                          <div className=\"percent-class left-absolute\">\n                            {res.val}%\n                          </div>\n                          <div className=\"flex1\"></div>\n                        </div>\n                        <div className=\"colB\"></div>\n                      </div>\n                    );\n                  }\n                })}\n            </div>\n          </div>\n\n          <div className=\"legend\">\n            {newObject !== null &&\n              newObject.map((res, i) => {\n                return (\n                  <div\n                    key={`legend-${i}`}\n                    className=\"flex-row-center narrow-row-height\"\n                  >\n                    <div\n                      className=\"square\"\n                      style={{\n                        backgroundColor: res.color\n                      }}\n                    ></div>\n                    <div className=\"title cursor-pointer\">{res.name}</div>\n                  </div>\n                );\n              })}\n          </div>\n        </div>\n      </article>\n    );\n  }\n}\n\nexport default InsightAnalyticsCard;\n"]},"metadata":{},"sourceType":"module"}